basePath: /api/v1
definitions:
  main.addMemberRequest:
    properties:
      user_id:
        type: integer
    required:
    - user_id
    type: object
  main.createGroupRequest:
    properties:
      description:
        maxLength: 255
        type: string
      member_ids:
        items:
          type: integer
        minItems: 1
        type: array
      name:
        maxLength: 255
        type: string
    required:
    - member_ids
    - name
    type: object
  main.createMessageRequest:
    properties:
      chat_id:
        type: integer
      message_text:
        maxLength: 4000
        type: string
    required:
    - chat_id
    - message_text
    type: object
  main.createPrivateChatRequest:
    properties:
      receiver_id:
        type: integer
    required:
    - receiver_id
    type: object
  main.updateGroupRequest:
    properties:
      description:
        maxLength: 255
        type: string
      name:
        maxLength: 255
        type: string
    required:
    - name
    type: object
  main.updateMessageRequest:
    properties:
      message_text:
        maxLength: 4000
        type: string
    required:
    - message_text
    type: object
info:
  contact:
    email: support@swagger.io
    name: API Support
    url: http://www.swagger.io/support
  description: Api for gophers Chat Project !
  license:
    name: Apache 2.0
    url: http://www.apache.org/licenses/LICENSE-2.0.html
  termsOfService: http://swagger.io/terms/
  title: ChatX API
paths:
  /chats:
    get:
      description: Joriy foydalanuvchiga tegishli private va group chatlar ro'yxatini
        qaytaradi.
      parameters:
      - description: Joriy foydalanuvchi IDsi
        in: header
        name: X-User-ID
        required: true
        type: integer
      - description: Chat nomi bo'yicha qidiruv
        in: query
        name: search
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: '{"data":[...chatlar...]}'
          schema:
            additionalProperties: true
            type: object
        "401":
          description: X-User-ID yuborilmagan yoki noto'g'ri
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Ichki server xatosi
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Joriy user chatlari
      tags:
      - chats
    post:
      consumes:
      - application/json
      description: Ikki foydalanuvchi orasida private chat yaratadi. Agar chat oldin
        yaratilgan bo'lsa, o'sha chat_id qaytadi.
      parameters:
      - description: Joriy foydalanuvchi IDsi
        in: header
        name: X-User-ID
        required: true
        type: integer
      - description: Private chat uchun receiver ma'lumoti
        in: body
        name: payload
        required: true
        schema:
          $ref: '#/definitions/main.createPrivateChatRequest'
      produces:
      - application/json
      responses:
        "201":
          description: '{"data":{"chat_id":12}}'
          schema:
            additionalProperties: true
            type: object
        "400":
          description: So'rov noto'g'ri
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: X-User-ID yuborilmagan yoki noto'g'ri
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Ichki server xatosi
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Private chat yaratish
      tags:
      - chats
  /chats/{chat_id}:
    delete:
      description: Berilgan `chat_id` bo'yicha chatni o'chiradi.
      parameters:
      - description: Joriy foydalanuvchi IDsi
        in: header
        name: X-User-ID
        required: true
        type: integer
      - description: Chat ID
        in: path
        name: chat_id
        required: true
        type: integer
      responses:
        "204":
          description: Muvaffaqiyatli o'chirildi
        "400":
          description: chat_id noto'g'ri
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: X-User-ID yuborilmagan yoki noto'g'ri
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Chat topilmadi
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Ichki server xatosi
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Chatni o'chirish
      tags:
      - chats
  /chats/{chat_id}/messages:
    get:
      description: Berilgan chatdagi xabarlar tarixini qaytaradi. Faqat chat a'zosi
        ko'ra oladi.
      parameters:
      - description: Joriy foydalanuvchi IDsi
        in: header
        name: X-User-ID
        required: true
        type: integer
      - description: Chat ID
        in: path
        name: chat_id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: '{"data":[...xabarlar...]}'
          schema:
            additionalProperties: true
            type: object
        "400":
          description: chat_id noto'g'ri
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: X-User-ID yuborilmagan yoki noto'g'ri
          schema:
            additionalProperties:
              type: string
            type: object
        "403":
          description: User chat a'zosi emas
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Ichki server xatosi
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Chat xabarlarini olish
      tags:
      - messages
  /groups:
    post:
      consumes:
      - application/json
      description: Yangi group chat yaratadi, joriy userni owner qiladi va `member_ids`
        dagi userlarni qo'shadi.
      parameters:
      - description: Joriy foydalanuvchi IDsi (owner bo'ladi)
        in: header
        name: X-User-ID
        required: true
        type: integer
      - description: Group yaratish ma'lumotlari
        in: body
        name: payload
        required: true
        schema:
          $ref: '#/definitions/main.createGroupRequest'
      produces:
      - application/json
      responses:
        "201":
          description: '{"data":{"chat_id":17}}'
          schema:
            additionalProperties: true
            type: object
        "400":
          description: So'rov noto'g'ri
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: X-User-ID yuborilmagan yoki noto'g'ri
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Ichki server xatosi
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Group chat yaratish
      tags:
      - groups
  /groups/{chat_id}:
    patch:
      consumes:
      - application/json
      description: Berilgan `chat_id` bo'yicha group nomi va description qiymatlarini
        yangilaydi.
      parameters:
      - description: Joriy foydalanuvchi IDsi
        in: header
        name: X-User-ID
        required: true
        type: integer
      - description: Group chat ID
        in: path
        name: chat_id
        required: true
        type: integer
      - description: Yangilanadigan qiymatlar
        in: body
        name: payload
        required: true
        schema:
          $ref: '#/definitions/main.updateGroupRequest'
      produces:
      - application/json
      responses:
        "200":
          description: '{"data":{"result":"updated"}}'
          schema:
            additionalProperties: true
            type: object
        "400":
          description: ID yoki body noto'g'ri
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: X-User-ID yuborilmagan yoki noto'g'ri
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Group topilmadi
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Ichki server xatosi
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Group ma'lumotlarini yangilash
      tags:
      - groups
  /groups/{chat_id}/{user_id}/member:
    delete:
      description: Groupdan userni chiqaradi. O'zini chiqarish mumkin, boshqa userni
        esa owner/admin chiqara oladi.
      parameters:
      - description: Amalni bajarayotgan foydalanuvchi IDsi
        in: header
        name: X-User-ID
        required: true
        type: integer
      - description: Group chat ID
        in: path
        name: chat_id
        required: true
        type: integer
      - description: Chiqariladigan user ID
        in: path
        name: user_id
        required: true
        type: integer
      responses:
        "204":
          description: Muvaffaqiyatli chiqarildi
        "400":
          description: Path param noto'g'ri
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: X-User-ID yuborilmagan yoki noto'g'ri
          schema:
            additionalProperties:
              type: string
            type: object
        "403":
          description: Ruxsat yo'q
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Member yoki chat topilmadi
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Ichki server xatosi
          schema:
            additionalProperties:
              type: string
            type: object
      summary: A'zoni groupdan chiqarish
      tags:
      - members
  /groups/{chat_id}/members:
    get:
      description: Berilgan group chat uchun a'zolar ro'yxatini qaytaradi. Faqat chat
        a'zosi ko'ra oladi.
      parameters:
      - description: Joriy foydalanuvchi IDsi
        in: header
        name: X-User-ID
        required: true
        type: integer
      - description: Group chat ID
        in: path
        name: chat_id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: '{"data":[...a''zolar...]}'
          schema:
            additionalProperties: true
            type: object
        "400":
          description: chat_id noto'g'ri
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: X-User-ID yuborilmagan yoki noto'g'ri
          schema:
            additionalProperties:
              type: string
            type: object
        "403":
          description: User chat a'zosi emas
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Ichki server xatosi
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Chat a'zolarini olish
      tags:
      - members
    post:
      consumes:
      - application/json
      description: Group chatga yangi a'zo qo'shadi. Amalni faqat owner yoki admin
        bajarishi mumkin.
      parameters:
      - description: Amalni bajarayotgan foydalanuvchi IDsi
        in: header
        name: X-User-ID
        required: true
        type: integer
      - description: Group chat ID
        in: path
        name: chat_id
        required: true
        type: integer
      - description: Qo'shiladigan user ID
        in: body
        name: payload
        required: true
        schema:
          $ref: '#/definitions/main.addMemberRequest'
      produces:
      - application/json
      responses:
        "201":
          description: '{"data":{"result":"added","user_id":21}}'
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Path param yoki body noto'g'ri
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: X-User-ID yuborilmagan yoki noto'g'ri
          schema:
            additionalProperties:
              type: string
            type: object
        "403":
          description: Ruxsat yo'q
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Chat topilmadi
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Ichki server xatosi
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Groupga a'zo qo'shish
      tags:
      - members
  /health:
    get:
      description: API ishlayotganini tekshirish uchun texnik endpoint.
      produces:
      - application/json
      responses:
        "200":
          description: '{"status":"available","version":"v1.0.0","message":"Welcome
            to ChatX API","ENV":"dev"}'
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Ichki server xatosi
          schema:
            additionalProperties:
              type: string
            type: object
      summary: API holatini tekshirish
      tags:
      - system
  /messages:
    post:
      consumes:
      - application/json
      description: Joriy foydalanuvchi berilgan chatga yangi xabar yuboradi.
      parameters:
      - description: Joriy foydalanuvchi IDsi
        in: header
        name: X-User-ID
        required: true
        type: integer
      - description: Xabar yuborish ma'lumotlari
        in: body
        name: payload
        required: true
        schema:
          $ref: '#/definitions/main.createMessageRequest'
      produces:
      - application/json
      responses:
        "201":
          description: '{"data":{...xabar...}}'
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Body noto'g'ri
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: X-User-ID yuborilmagan yoki noto'g'ri
          schema:
            additionalProperties:
              type: string
            type: object
        "403":
          description: User chat a'zosi emas
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Ichki server xatosi
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Xabar yuborish
      tags:
      - messages
  /messages/{id}:
    delete:
      description: Joriy foydalanuvchi o'zi yuborgan xabarni o'chiradi.
      parameters:
      - description: Joriy foydalanuvchi IDsi
        in: header
        name: X-User-ID
        required: true
        type: integer
      - description: Xabar ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: '{"data":{"result":"deleted"}}'
          schema:
            additionalProperties: true
            type: object
        "400":
          description: ID noto'g'ri
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: X-User-ID yuborilmagan yoki noto'g'ri
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Xabar topilmadi yoki userga tegishli emas
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Ichki server xatosi
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Xabarni o'chirish
      tags:
      - messages
    patch:
      consumes:
      - application/json
      description: Joriy foydalanuvchi o'zi yuborgan xabar matnini yangilaydi.
      parameters:
      - description: Joriy foydalanuvchi IDsi
        in: header
        name: X-User-ID
        required: true
        type: integer
      - description: Xabar ID
        in: path
        name: id
        required: true
        type: integer
      - description: Yangilangan xabar matni
        in: body
        name: payload
        required: true
        schema:
          $ref: '#/definitions/main.updateMessageRequest'
      produces:
      - application/json
      responses:
        "200":
          description: '{"data":{"result":"updated"}}'
          schema:
            additionalProperties: true
            type: object
        "400":
          description: ID yoki body noto'g'ri
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: X-User-ID yuborilmagan yoki noto'g'ri
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Xabar topilmadi yoki userga tegishli emas
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Ichki server xatosi
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Xabarni tahrirlash
      tags:
      - messages
  /messages/chats/{chat_id}/read:
    patch:
      description: Joriy foydalanuvchi uchun berilgan chatdagi barcha kiruvchi xabarlarni
        o'qilgan holatiga o'tkazadi.
      parameters:
      - description: Joriy foydalanuvchi IDsi
        in: header
        name: X-User-ID
        required: true
        type: integer
      - description: Chat ID
        in: path
        name: chat_id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: '{"data":{"status":"success"}}'
          schema:
            additionalProperties: true
            type: object
        "400":
          description: chat_id noto'g'ri
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: X-User-ID yuborilmagan yoki noto'g'ri
          schema:
            additionalProperties:
              type: string
            type: object
        "403":
          description: User chat a'zosi emas
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Ichki server xatosi
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Chatdagi xabarlarni o'qilgan deb belgilash
      tags:
      - messages
  /users:
    get:
      description: Joriy userdan tashqari userlarni pagination va search bilan qaytaradi.
      parameters:
      - description: Joriy foydalanuvchi IDsi
        in: header
        name: X-User-ID
        required: true
        type: integer
      - default: 20
        description: Sahifadagi element soni (1..20)
        in: query
        name: limit
        type: integer
      - default: 0
        description: Qaysi elementdan boshlab olish
        in: query
        name: offset
        type: integer
      - description: Username bo'yicha qidiruv (max 10 ta belgi)
        in: query
        name: search
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: '{"data":[...foydalanuvchilar...]}'
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Query param noto'g'ri
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: X-User-ID yuborilmagan yoki noto'g'ri
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Ichki server xatosi
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Foydalanuvchilar ro'yxati
      tags:
      - users
securityDefinitions:
  ApiKeyAuth:
    description: Joriy foydalanuvchi IDsi (demo auth uchun)
    in: header
    name: X-User-ID
    type: apiKey
swagger: "2.0"
