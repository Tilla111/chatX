<svg width="1500" height="980" viewBox="0 0 1500 980" xmlns="http://www.w3.org/2000/svg" role="img" aria-labelledby="title desc">
  <title id="title">ChatX architecture</title>
  <desc id="desc">ChatX tizim arxitekturasi diagrammasi</desc>
  <defs>
    <marker id="arrow" viewBox="0 0 10 10" refX="8" refY="5" markerWidth="8" markerHeight="8" orient="auto-start-reverse">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#334155"/>
    </marker>
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="0" dy="7" stdDeviation="9" flood-color="#0F172A" flood-opacity="0.15"/>
    </filter>
  </defs>

  <rect width="1500" height="980" fill="#F8FAFC"/>
  <text x="52" y="64" font-family="Segoe UI, Arial, sans-serif" font-size="36" font-weight="700" fill="#0F172A">ChatX Architecture</text>
  <text x="52" y="100" font-family="Segoe UI, Arial, sans-serif" font-size="20" fill="#334155">Go API + PostgreSQL + WebSocket + Mailtrap</text>

  <g filter="url(#shadow)">
    <rect x="78" y="188" width="340" height="168" rx="18" ry="18" fill="#E0F2FE" stroke="#38BDF8"/>
    <text x="248" y="240" text-anchor="middle" font-family="Segoe UI, Arial, sans-serif" font-size="26" font-weight="700" fill="#0C4A6E">Web Client</text>
    <text x="248" y="280" text-anchor="middle" font-family="Segoe UI, Arial, sans-serif" font-size="18" fill="#075985">/web (HTML/CSS/JS)</text>
    <text x="248" y="312" text-anchor="middle" font-family="Segoe UI, Arial, sans-serif" font-size="18" fill="#075985">REST + WebSocket</text>
  </g>

  <g filter="url(#shadow)">
    <rect x="518" y="132" width="404" height="262" rx="20" ry="20" fill="#FFFFFF" stroke="#64748B"/>
    <text x="720" y="184" text-anchor="middle" font-family="Segoe UI, Arial, sans-serif" font-size="30" font-weight="700" fill="#0F172A">API Layer</text>
    <text x="720" y="224" text-anchor="middle" font-family="Segoe UI, Arial, sans-serif" font-size="19" fill="#334155">chi router + middleware</text>
    <text x="720" y="256" text-anchor="middle" font-family="Segoe UI, Arial, sans-serif" font-size="19" fill="#334155">JWT AuthMiddleware</text>
    <text x="720" y="288" text-anchor="middle" font-family="Segoe UI, Arial, sans-serif" font-size="19" fill="#334155">handlers: auth/chat/group/message</text>
    <text x="720" y="320" text-anchor="middle" font-family="Segoe UI, Arial, sans-serif" font-size="19" fill="#334155">swagger + static file server</text>
  </g>

  <g filter="url(#shadow)">
    <rect x="518" y="462" width="404" height="254" rx="20" ry="20" fill="#F8FAFC" stroke="#64748B"/>
    <text x="720" y="514" text-anchor="middle" font-family="Segoe UI, Arial, sans-serif" font-size="30" font-weight="700" fill="#0F172A">Domain Services</text>
    <text x="720" y="554" text-anchor="middle" font-family="Segoe UI, Arial, sans-serif" font-size="19" fill="#334155">usecase layer</text>
    <text x="720" y="586" text-anchor="middle" font-family="Segoe UI, Arial, sans-serif" font-size="19" fill="#334155">User, Chat, Member, Message</text>
    <text x="720" y="618" text-anchor="middle" font-family="Segoe UI, Arial, sans-serif" font-size="19" fill="#334155">role/permission checks</text>
    <text x="720" y="650" text-anchor="middle" font-family="Segoe UI, Arial, sans-serif" font-size="19" fill="#334155">transactional operations</text>
  </g>

  <g filter="url(#shadow)">
    <rect x="1038" y="132" width="368" height="230" rx="20" ry="20" fill="#ECFEFF" stroke="#06B6D4"/>
    <text x="1222" y="184" text-anchor="middle" font-family="Segoe UI, Arial, sans-serif" font-size="30" font-weight="700" fill="#164E63">WebSocket Hub</text>
    <text x="1222" y="224" text-anchor="middle" font-family="Segoe UI, Arial, sans-serif" font-size="19" fill="#0E7490">register/unregister clients</text>
    <text x="1222" y="256" text-anchor="middle" font-family="Segoe UI, Arial, sans-serif" font-size="19" fill="#0E7490">targeted broadcasts</text>
    <text x="1222" y="288" text-anchor="middle" font-family="Segoe UI, Arial, sans-serif" font-size="19" fill="#0E7490">new_message, read, member, delete</text>
  </g>

  <g filter="url(#shadow)">
    <rect x="1038" y="438" width="368" height="278" rx="20" ry="20" fill="#ECFDF5" stroke="#10B981"/>
    <text x="1222" y="492" text-anchor="middle" font-family="Segoe UI, Arial, sans-serif" font-size="30" font-weight="700" fill="#064E3B">Storage</text>
    <text x="1222" y="534" text-anchor="middle" font-family="Segoe UI, Arial, sans-serif" font-size="19" fill="#065F46">PostgreSQL</text>
    <text x="1222" y="566" text-anchor="middle" font-family="Segoe UI, Arial, sans-serif" font-size="19" fill="#065F46">users, chats, chat_members</text>
    <text x="1222" y="598" text-anchor="middle" font-family="Segoe UI, Arial, sans-serif" font-size="19" fill="#065F46">group_info, messages</text>
    <text x="1222" y="630" text-anchor="middle" font-family="Segoe UI, Arial, sans-serif" font-size="19" fill="#065F46">message_reads, user_invitations</text>
  </g>

  <g filter="url(#shadow)">
    <rect x="78" y="474" width="340" height="188" rx="18" ry="18" fill="#FEF3C7" stroke="#F59E0B"/>
    <text x="248" y="530" text-anchor="middle" font-family="Segoe UI, Arial, sans-serif" font-size="28" font-weight="700" fill="#78350F">Mailtrap SMTP</text>
    <text x="248" y="566" text-anchor="middle" font-family="Segoe UI, Arial, sans-serif" font-size="18" fill="#92400E">Activation email</text>
    <text x="248" y="598" text-anchor="middle" font-family="Segoe UI, Arial, sans-serif" font-size="18" fill="#92400E">user_invitation.templ</text>
  </g>

  <g stroke="#334155" stroke-width="3" fill="none" marker-end="url(#arrow)">
    <path d="M418 272 L518 272"/>
    <path d="M922 236 L1038 236"/>
    <path d="M722 394 L722 462"/>
    <path d="M922 588 L1038 588"/>
    <path d="M518 566 L418 566"/>
    <path d="M978 272 C1060 272 1100 320 1100 438"/>
    <path d="M590 206 C480 206 420 340 300 474"/>
  </g>

  <text x="466" y="260" font-family="Segoe UI, Arial, sans-serif" font-size="16" fill="#1E293B">HTTP/JSON</text>
  <text x="944" y="222" font-family="Segoe UI, Arial, sans-serif" font-size="16" fill="#1E293B">WS connect</text>
  <text x="742" y="430" font-family="Segoe UI, Arial, sans-serif" font-size="16" fill="#1E293B">usecases</text>
  <text x="938" y="572" font-family="Segoe UI, Arial, sans-serif" font-size="16" fill="#1E293B">SQL</text>
  <text x="430" y="550" font-family="Segoe UI, Arial, sans-serif" font-size="16" fill="#1E293B">activation email</text>
</svg>
